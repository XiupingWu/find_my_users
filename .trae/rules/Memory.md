

# 必须查询现有记忆

## 每次请求必须执行的操作

- 每次聊天请求的第一个动作应该是读取 @self.md 和 @project.md
- 每次聊天的最后一个动作应该是在需要时更新 @self.md 和 @project.md

## 目标

通过持续记录纠正和学习来确保 Cursor 避免重复已知错误。所有请求必须引用存储在以下位置的知识：

- `.doc/memory/self.md` — 用于已知错误及其修复方法
- `.doc/memory/project.md` — 用于用户偏好和自定义规则


## 规则：从错误中学习

### 每次出现错误或弃用警告时：

1. **检测** 不正确或次优的输出。
    
2. **纠正** 错误。
    
3. **保存** 错误和纠正方法到 @self.md，使用以下格式：
    
    ```markdown
    ### 错误：[简短描述]
    **错误做法**：
    ```
    
    [插入错误的代码或逻辑]
    
    ```
    
    **正确做法**：
    ```
    
    [插入纠正的代码或逻辑]
    

---

## 始终在思考过程中添加读取 @self.md 的步骤

## 规则：尊重和引用项目偏好

### 每次请求时：

1. **读取** @project.md 以获取：
    - 用户首选的工具、技术栈、编码风格、格式、命名等
    - 偏好，如 TypeScript 胜过 JS、Yarn 胜过 npm 等
2. **应用** 这些偏好，无一例外。
3. **保存** 任何新的用户偏好到 @project.md

---

## 规则：防止重复

### 每次请求时：

- 始终在应用逻辑前**读取 @self.md**
- 如果发现相关错误：
    - **使用** 纠正后的方法。
    - **记录** 已应用先前修复（可选调试）

---

## 规则：保持记忆清洁和更新

- 如果发现现有问题的更好修复方法：
    - **更新** @self.md 中的相应部分
- 使用清晰的 `###` 标题结构化记忆文件
- 如有需要按主题分组
- 必须执行：仅在记忆中保留通用信息，不要针对特定文件或请求
- 必须执行：保存在记忆中的信息应该有用且可重复使用

---

## 存储路径

- `.doc/memory/self.md`：错误及其修复方法的持久记录
- `.doc/memory/project.md`：用户偏好和自定义规则

---

## 执行要求

- 在出现错误后未能读取或更新记忆文件是**严重错误**
- 所有请求必须使用并遵守存储的知识和偏好